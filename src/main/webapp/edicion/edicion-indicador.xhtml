<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/WEB-INF/template.xhtml">
    <ui:define name="content">    
        <f:metadata>
            <f:importConstants type="com.ua.sistemaindicadores.frontend.beans.EditarIndicadorBean"/>
            <f:event type="preRenderView" listener="#{editarIndicadorBean.cargarDatos}"/>
        </f:metadata>        
        <div class="ui-g-12 ui-g-title align-center">
            <h2 class="border-bottom-orange align-center">Administración de Indicadores</h2>   
        </div>
        <p:growl id="growl" showDetail="true"/>
        <div class="ui-g-12 align-center">
            <div class="ui-g-12 ui-md-3"></div>
            <div class="ui-g-12 ui-md-6 ui-g-nopad">
                <div class="card card-creacion-tipo-indicador">                                              
                    <p:panel id="formulario" class="formulario" header="EDITAR INDICADOR">
                        <p:wizard flowListener="#{editarIndicadorBean.flujoProceso}"
                                  showStepStatus="true"
                                  nextLabel="Siguiente"
                                  backLabel="Anterior"
                                  >                                     
                            <p:tab id="pag1" title="1">
                                <p:panelGrid class="crear-tipo-indicadores-table" 
                                             layout="grid"
                                             styleClass="ui-noborder panelgrid-lefttext ui-panelgrid-blank ui-fluid"
                                             columns="2">
                                    <!---->
                                    <p:outputLabel class="texto-ver-centrado" id="vigenciaLabel" value="Vigencia: *"/>  
                                    <p:selectOneMenu
                                        value="#{editarIndicadorBean.vigencia}" 
                                        id="vigencia" required="true">
                                        <f:selectItem itemLabel="Vigente" itemValue="VIGENTE"/>
                                        <f:selectItem itemLabel="No Vigente" itemValue="NO VIGENTE"/>
                                        <p:ajax event="itemSelect"
                                                listener="#{editarIndicadorBean.cambiarEstado}"
                                                process="@this"
                                                update="@form:listaTipo, @form:listaClas"/>       
                                    </p:selectOneMenu>
                                    <p:message for="vigenciaLabel"/>                                     
                                    <p:message for="vigencia"/>     
                                    <p:outputLabel class="texto-ver-centrado" id="listaTipoLabel" value="Tipo indicador: *"/>
                                    <p:selectOneMenu id="listaTipo"
                                                     value="#{editarIndicadorBean.indicadorTipoSeleccionado}"
                                                     required="true"
                                                     requiredMessage="Se debe selccionar un tipo de indicador."
                                                     var="tipo"
                                                     converter="tipoIndicadorConverter"
                                                     filter="true" 
                                                     filterMatchMode="contains" 
                                                     styleClass="manymenu-advanced"
                                                     >
                                        <f:selectItems value="#{editarIndicadorBean.listaIndicadorTipo}"
                                                       var="indTipo"
                                                       itemLabel="#{indTipo.nombre}"
                                                       itemValue="#{indTipo}"
                                                       itemDescription="#{indTipo.descripcion}"/>
                                        <p:column>
                                            #{tipo.nombre}
                                        </p:column>
                                        <p:message for="indTipo"/>                
                                        <p:ajax event="itemSelect"
                                                listener="#{editarIndicadorBean.cambiarTipoIndicador}"
                                                process="@this"
                                                update="@form:listaClas"/>                                  
                                    </p:selectOneMenu>
                                    <p:message for="listaTipoLabel"/>                                     
                                    <p:message for="listaTipo"/>                              
                                    <!---->
                                    <p:outputLabel class="texto-ver-centrado" id="clasLabel" value="Clasificación: *"/>
                                    <p:selectOneMenu id="listaClas"
                                                     value="#{editarIndicadorBean.clasificacionSeleccionada}"
                                                     required="true"
                                                     requiredMessage="Se debe seleccionar una clasificación."
                                                     var="clas"
                                                     converter="clasificacionConverter"
                                                     filter="true" 
                                                     filterMatchMode="contains" 
                                                     styleClass="manymenu-advanced"
                                                     >
                                        <f:selectItems value="#{editarIndicadorBean.listaClasificacion}"
                                                       var="clasificacion"
                                                       itemLabel="#{clasificacion.nombre}"
                                                       itemValue="#{clasificacion}"
                                                       itemDescription="#{clasificacion.descripcion}"/>
                                        <p:column>
                                            #{clas.nombre}
                                        </p:column>
                                        <p:message for="clasificacion"/>                
                                    </p:selectOneMenu>
                                    <p:message for="clasLabel"/>                                     
                                    <p:message for="listaClas"/>     
                                    <!---->
                                    <p:outputLabel class="texto-ver-centrado" id="nIndLabel" value="N° de indicador: *"/>
                                    <p:inputText 
                                        value="#{editarIndicadorBean.n_indicador}"
                                        required="true"
                                        requiredMessage="Campo n° de indicador es requerido."
                                        id="nInd"                                
                                        >                          
                                    </p:inputText>
                                    <p:message for="nIndLabel"/>                                     
                                    <p:message for="nInd"/>     
                                    <!---->     
                                    <p:outputLabel class="texto-ver-centrado" id="nombreLabel" value="Nombre de indicador: *"/>
                                    <p:inputText 
                                        value="#{editarIndicadorBean.nombreIndicador}"
                                        required="true"
                                        requiredMessage="Campo nombre de indicador es requerido."
                                        id="nombre"                                
                                        >                        
                                    </p:inputText>
                                    <p:message for="nombreLabel"/>                                     
                                    <p:message for="nombre"/>     
                                    <!---->                            
                                    <p:outputLabel class="texto-ver-centrado" id="descripcionIndicadorLabel" value="Descripción de indicador: *"/>
                                    <p:inputTextarea 
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo descripción de indicador es requerido."
                                        value="#{editarIndicadorBean.descripcionIndicador}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        id="descripcionIndicador"                                 
                                        maxlength="240" 
                                        rows="8" cols="18">
                                    </p:inputTextarea>
                                    <p:message for="descripcionIndicadorLabel"/>                                     
                                    <p:message for="descripcionIndicador"/>     
                                    <!---->    
                                    <p:outputLabel class="texto-ver-centrado" id="aplicaLineamientoLabel" value="Aplica lineamiento: *"/>
                                    <p:inputText 
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo aplica lineamiento es requerido."                                
                                        value="#{editarIndicadorBean.aplicaLineamiento}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        id="aplicaLineamiento"                                 
                                        >
                                    </p:inputText>
                                    <p:message for="aplicaLineamientoLabel"/>                                     
                                    <p:message for="aplicaLineamiento"/>     
                                    <!---->                              
                                    <p:outputLabel class="texto-ver-centrado" id="aplicaObjetivoLabel" value="Aplica objetivo: *"/>
                                    <p:inputText 
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo aplica objetivo es requerido."                                
                                        value="#{editarIndicadorBean.aplicaObjetivo}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        id="aplicaObjetivo"                                 
                                        >                     
                                    </p:inputText>
                                    <p:message for="aplicaObjetivoLabel"/>                                     
                                    <p:message for="aplicaObjetivo"/>     
                                    <!---->                                  
                                    <p:outputLabel class="texto-ver-centrado" id="descripcionObjetivoLabel" value="Descripción de objetivo: *"/>
                                    <p:inputTextarea 
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo descripción de objetivo es requerido."                                
                                        value="#{editarIndicadorBean.descripcionObjetivo}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        id="descripcionObjetivo"                                 
                                        maxlength="240"
                                        rows="8" cols="18">                         
                                    </p:inputTextarea>
                                    <p:message for="descripcionObjetivoLabel"/>                                     
                                    <p:message for="descripcionObjetivo"/>     
                                    <!---->      
                                    <p:outputLabel class="texto-ver-centrado" id="ajustePDEILabel" value="Ajuste PDEI: *"/>
                                    <p:selectOneMenu  
                                        id="ajustePDEI"
                                        value="#{editarIndicadorBean.ajustePDEI}"
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo ajuste PDEI es requerido."
                                        var="ajustePDEI"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        converter="ajusteConverter"
                                        styleClass="manymenu-advanced">
                                        <f:selectItem itemLabel="-" itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{editarIndicadorBean.listaAjustePdei}"
                                                       var="ajustePdei"
                                                       itemLabel="#{ajustePdei.ajustePdei}"
                                                       itemValue="#{ajustePdei}"/>         
                                        <p:column>
                                            #{ajustePDEI.ajustePdei}
                                        </p:column>                                              
                                    </p:selectOneMenu>
                                    <p:message for="ajustePDEILabel"/>                                     
                                    <p:message for="ajustePDEI"/>                              
                                    <!---->  
                                    <p:outputLabel class="texto-ver-centrado" id="unidadRepresentacionLabel" value="Unidad de representación: *"/>
                                    <p:selectOneMenu
                                        id="unidadRepresentacion"                            
                                        value="#{editarIndicadorBean.unidadRepresentacion}"
                                        requiredMessage="Campo unidad de representación es requerido."
                                        required="true"
                                        var="uRepr"
                                        converter="unidadRepresentacionConverter" 
                                        styleClass="manymenu-advanced"> 
                                        <f:selectItem itemLabel="-" itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{editarIndicadorBean.listaUnidadRepresentacion}"
                                                       var="unidadRepresentacion"
                                                       itemLabel="#{unidadRepresentacion.unidadRepresentacion}"
                                                       itemValue="#{unidadRepresentacion}"/>
                                        <p:column>
                                            #{uRepr.unidadRepresentacion}
                                        </p:column>       
                                        <p:ajax event="itemSelect" update="@form:metas" listener="#{editarIndicadorBean.cambioMetasURepr()}"/>
                                    </p:selectOneMenu>
                                    <p:message for="unidadRepresentacionLabel"/>                                     
                                    <p:message for="unidadRepresentacion"/>                              
                                    <!---->  
                                    <p:outputLabel class="texto-ver-centrado" id="generacionDatosLabel" value="Generación de los datos: *"/>
                                    <p:selectCheckboxMenu        
                                        id="generacionDatos"
                                        value="#{editarIndicadorBean.generacionDatos}"
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo generación de datos es requerido."     
                                        converter="generacionDatosConverter"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        filter="true" 
                                        filterMatchMode="contains" 
                                        styleClass="manymenu-advanced"
                                        multiple = "true">
                                        <f:selectItems value="#{editarIndicadorBean.listaGeneracionDatos}"
                                                       var="genDatos"
                                                       itemLabel="#{genDatos.generacionDatos}"
                                                       itemValue="#{genDatos}"/>
                                    </p:selectCheckboxMenu>
                                    <p:message for="generacionDatosLabel"/>                                     
                                    <p:message for="generacionDatos"/>                              
                                    <!---->                              
                                    <p:outputLabel class="texto-ver-centrado" id="plazoLabel" value="Plazo: *"/>
                                    <p:selectOneMenu    
                                        id="plazo"
                                        value="#{editarIndicadorBean.plazo}"
                                        requiredMessage="Campo plazo es requerido."
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        var="plazo"
                                        converter="plazoConverter"
                                        styleClass="manymenu-advanced">
                                        <f:selectItem itemLabel="-" itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{editarIndicadorBean.listaPlazo}"
                                                       var="plazo"
                                                       itemLabel="#{plazo.plazo}"
                                                       itemValue="#{plazo}"/>
                                        <p:column>
                                            #{plazo.plazo}
                                        </p:column>                                           
                                    </p:selectOneMenu>
                                    <p:message for="plazoLabel"/>                                     
                                    <p:message for="plazo"/>                              
                                    <!---->                                     
                                    <p:outputLabel class="texto-ver-centrado" id="versionLabel" value="Versión: *"/>
                                    <p:inputText 
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo versión es requerido."                                
                                        value="#{editarIndicadorBean.version}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        id="version"                                
                                        >                       
                                    </p:inputText>
                                    <p:message for="versionLabel"/>                                     
                                    <p:message for="version"/>    
                                    <!---->     
                                    <p:outputLabel class="texto-ver-centrado" id="lineaBaseLabel" value="Línea base: *"/>
                                    <p:inputText 
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo linea base es requerido."                                
                                        value="#{editarIndicadorBean.lineaBase}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        id="lineaBase"                                
                                        >                  
                                    </p:inputText>
                                    <p:message for="lineaBaseLabel"/>                                     
                                    <p:message for="lineaBase"/>
                                </p:panelGrid>
                            </p:tab>                     
                            <p:tab id="pag2" title="2">
                                <p:panelGrid class="crear-tipo-indicadores-table" 
                                             layout="grid"
                                             styleClass="ui-noborder panelgrid-lefttext ui-panelgrid-blank ui-fluid"
                                             columns="2">  
                                    <p:outputLabel class="texto-ver-centrado" id="metasLabel" value="Metas: *"/>
                                    <p:inputNumber id="metas"
                                                   value="#{editarIndicadorBean.metas}"
                                                   required="true"                                                   
                                                   requiredMessage="Campo metas es requerido."
                                                   symbol="#{editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Peso ($)'? '$' : ''}"
                                                   thousandSeparator="."
                                                   minValue="0"
                                                   decimalPlaces="0"                                                   
                                                   >                   
                                        <p:ajax event="change" listener="#{editarIndicadorBean.cambioMetasURepr()}"/>
                                    </p:inputNumber>                                        
                                    <p:message for="metasLabel"/>                                     
                                    <p:message for="metas"/>   
                                    <!---->                                     
                                    <p:outputLabel class="texto-ver-centrado" id="anioCumplimientoLabel" value="Año cumplimiento: *"/>
                                    <p:selectOneMenu       
                                        id="anioCumplimiento"
                                        value="#{editarIndicadorBean.anioCumplimiento}"
                                        requiredMessage="Campo año de cumplimiento es requerido."
                                        required="true"
                                        var="anioCum"
                                        converter="anioCumplimientoConverter"
                                        filter="true" 
                                        filterMatchMode="contains" 
                                        styleClass="manymenu-advanced">   
                                        <f:selectItem itemLabel="-" itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{editarIndicadorBean.listaAnioCumplimiento}"
                                                       var="anioCumplimiento"
                                                       itemLabel="#{anioCumplimiento.anioCumplimiento}"
                                                       itemValue="#{anioCumplimiento}"/>
                                        <p:column>
                                            #{anioCum.anioCumplimiento}
                                        </p:column>                                           
                                    </p:selectOneMenu>
                                    <p:message for="anioCumplimientoLabel"/>                                     
                                    <p:message for="anioCumplimiento"/>                                
                                    <!---->                                     
                                    <p:outputLabel class="texto-ver-centrado" id="medioVerificacionLabel" value="Medio de verificación: *"/>
                                    <p:inputText 
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo medio de verificación es requerido."                                 
                                        value="#{editarIndicadorBean.medioVerificacion}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        id="medioVerificacion"                                
                                        >                                
                                    </p:inputText>
                                    <p:message for="medioVerificacionLabel"/>                                     
                                    <p:message for="medioVerificacion"/>  
                                    <!---->                                     
                                    <p:outputLabel class="texto-ver-centrado" id="formaCalculoLabel" value="Forma de cálculo: *"/>
                                    <p:inputText 
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo forma de cálculo es requerido."                                 
                                        value="#{editarIndicadorBean.formaCalculo}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        id="formaCalculo"                                
                                        >                             
                                    </p:inputText>
                                    <p:message for="formaCalculoLabel"/>                                     
                                    <p:message for="formaCalculo"/>     
                                    <!---->                                     
                                    <p:outputLabel class="texto-ver-centrado" id="fuenteInformacionLabel" value="Fuente de información: *"/>
                                    <p:inputText 
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo fuente de información es requerido."                                 
                                        value="#{editarIndicadorBean.fuenteInformacion}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        id="fuenteInformacion"                                
                                        >                       
                                    </p:inputText>
                                    <p:message for="fuenteInformacionLabel"/>                                     
                                    <p:message for="fuenteInformacion"/>        
                                    <!---->                                     
                                    <p:outputLabel class="texto-ver-centrado" id="unidadProveedoraLabel" value="Unidad proveedora: *"/>
                                    <p:selectCheckboxMenu                     
                                        id="unidadProveedora"
                                        value="#{editarIndicadorBean.unidadProveedora}"
                                        requiredMessage="Campo unidad proveedora es requerido."
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"    
                                        converter="unidadProveedoraConverter"
                                        filter="true" 
                                        filterMatchMode="contains" 
                                        styleClass="manymenu-advanced"
                                        multiple = "true">
                                        <f:selectItems value="#{editarIndicadorBean.listaUnidadProveedora}"
                                                       var="unidadProv"
                                                       itemLabel="#{unidadProv.unidadProveedora}"
                                                       itemValue="#{unidadProv}"/>
                                    </p:selectCheckboxMenu>                            
                                    <p:message for="unidadProveedoraLabel"/>                                     
                                    <p:message for="unidadProveedora"/>      
                                    <!---->                                     
                                    <p:outputLabel class="texto-ver-centrado" id="proyectoAsociadoLabel" value="Proyecto asociado: *"/>
                                    <p:inputText 
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo proyecto asociado es requerido."                                 
                                        value="#{editarIndicadorBean.proyectoAsociado}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        id="proyectoAsociado"                                
                                        >                            
                                    </p:inputText>
                                    <p:message for="proyectoAsociadoLabel"/>                                     
                                    <p:message for="proyectoAsociado"/>           
                                    <!---->                                     
                                    <p:outputLabel class="texto-ver-centrado" id="comentarioLabel" value="Comentario: *"/>
                                    <p:inputTextarea 
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo comentario es requerido."                                 
                                        value="#{editarIndicadorBean.comentario}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        id="comentario"                                 
                                        maxlength="240" 
                                        rows="8" cols="18">
                                    </p:inputTextarea>
                                    <p:message for="comentarioLabel"/>                                     
                                    <p:message for="comentario"/>        
                                    <!---->                                     
                                    <p:outputLabel class="texto-ver-centrado" id="actividadComprometidaLabel" value="Actividad comprometida: *"/>
                                    <p:inputText 
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo actividad comprometida es requerida."                                 
                                        value="#{editarIndicadorBean.actividadComprometida}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        id="actividadComprometida"                                
                                        >                            
                                    </p:inputText>
                                    <p:message for="actividadComprometidaLabel"/>                                     
                                    <p:message for="actividadComprometida"/>      
                                    <!---->                                     
                                    <p:outputLabel class="texto-ver-centrado" id="estadoActividadLabel" value="Estado de actividad: *"/>
                                    <p:inputText 
                                        required="#{!editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        requiredMessage="Campo estado de actividad es requerido."                                 
                                        value="#{editarIndicadorBean.estadoActividad}"
                                        disabled="#{editarIndicadorBean.flagsTipoIndicador.getInputFlag(component.id)}"
                                        id="estadoActividad"                                
                                        >                              
                                    </p:inputText>
                                    <p:message for="estadoActividadLabel"/>                                     
                                    <p:message for="estadoActividad"/>
                                </p:panelGrid>
                            </p:tab>                             
                            <p:tab id="pag3" title="3">
                                <p:panelGrid class="crear-tipo-indicadores-table" 
                                             layout="grid"
                                             styleClass="ui-noborder panelgrid-lefttext ui-panelgrid-blank ui-fluid"
                                             columns="2">                                  
                                    <p:outputLabel class="texto-ver-centrado" id="frecuenciaMedicionLabel" value="Frecuencia de medición: *"/>
                                    <p:selectOneMenu        
                                        id="frecuenciaMedicion"
                                        value="#{editarIndicadorBean.frecuenciaMedicion}"
                                        required="true"
                                        var="frecuencia"
                                        converter="frecuenciaMedicionConverter"
                                        styleClass="manymenu-advanced">   
                                        <f:selectItems value="#{editarIndicadorBean.listaFrecuenciaMedicion}"
                                                       var="frecuenciaMedicion"
                                                       itemLabel="#{frecuenciaMedicion.frecuenciaMedicion}"
                                                       itemValue="#{frecuenciaMedicion}"/>
                                        <p:column>
                                            #{frecuencia.frecuenciaMedicion}
                                        </p:column>     
                                        <p:ajax event="itemSelect" 
                                                update="@form:logro"
                                                delay="50"
                                                listener="#{editarIndicadorBean.limpiarListas()}"
                                                process="@this, @form"/>                                           
                                    </p:selectOneMenu>
                                    <p:message for="frecuenciaMedicionLabel"/>                                     
                                    <p:message for="frecuenciaMedicion"/>  
                                    <p:outputLabel class="texto-ver-centrado" id="aniosRangoLabel" value="Año inicio y término de evaluación: *"/>
                                    <h:panelGrid id="panelSlider" columns="1">                                        
                                        <p:slider id="sliderAnio"
                                                  widgetVar="sliderAnio"
                                                  for="minAnioValue,maxAnioValue" 
                                                  display="displayRange" 
                                                  onSlideEnd="#{editarIndicadorBean.limpiarListas()}"
                                                  range="true"
                                                  minValue="#{editarIndicadorBean.min}"  
                                                  maxValue="#{editarIndicadorBean.max}"                                          
                                                  displayTemplate="Inicio en {min} y término en {max}">    
                                                  <p:ajax event="slideEnd" 
                                                          update="@form:logro"
                                                          listener="#{editarIndicadorBean.limpiarListas()}"/>                                            
                                        </p:slider>
                                        <h:outputText id="displayRange" 
                                                      value="Inicio en #{editarIndicadorBean.minValue} y término en #{editarIndicadorBean.maxValue}"                                                      
                                                      />                                        
                                    </h:panelGrid>
                                    <p:commandButton style="visibility: hidden;" process="@this"/>              
                                    <p:commandButton id="confLogros"                                                     
                                                     widgetVar="logrosButton"
                                                     class="ui-button-formulario"      
                                                     value="Configurar actividades y logros"
                                                     action="#{editarIndicadorBean.createList()}"
                                                     process="@this, @form"
                                                     update="@form:panelAnios, @form:growl"/>     
                                    <p:outputLabel class="texto-ver-centrado" id="logroLabel" value="% Logro: *"/>
                                    <p:outputLabel class="texto-ver-centrado" id="logro" value="#{editarIndicadorBean.logro eq null? '' : editarIndicadorBean.logro.concat('%')}"/>    
                                    <p:message for="logroLabel"/>                                     
                                    <p:message for="logro"/>                                          
                                         
                                         
                                                                             
                                    <p:commandButton widgetVar="editarButton" 
                                                     value="Editar indicador"   
                                                     class="ui-button-formulario"     
                                                     action="#{editarIndicadorBean.editarIndicador}"   
                                                     onclick="PF('editarButton').disable()"
                                                     disabled="#{editarIndicadorBean.disabled}"                                                     
                                                     update="@form" 
                                                     process="@this, @form"/>                                                                                                         
                                </p:panelGrid>
                            </p:tab>                        
                        </p:wizard> 
                    </p:panel>
                </div>    
                <h:inputHidden id="minAnioValue" value="#{editarIndicadorBean.minValue}"/>
                <h:inputHidden id="maxAnioValue" value="#{editarIndicadorBean.maxValue}"/>   
            </div>
            <div class="ui-g-12 ui-md-3"></div>
            <p:dialog id="dialogWindow" header="Actividades y logros"  widgetVar="dialog" minWidth="340" width="340" minHeight="320" height="360" showEffect="fade" modal="true" resizable="false">
                <p:accordionPanel id="panelAnios" widgetVar="panelAnios" value="#{editarIndicadorBean.frecuenciaMedicion.frecuenciaMedicion eq 'Mensual' 
                                                                                  or
                                                                                  editarIndicadorBean.frecuenciaMedicion.frecuenciaMedicion eq 'Semestral'?
                                                                                  editarIndicadorBean.listaActividadesMesSemestre.entrySet().toArray()
                                                                                  :  
                                                                                  editarIndicadorBean.listaActividades.entrySet().toArray()}" var="item">
                    <p:tab title="#{item.key}">        
                        <!--Este treetable se desplegara solo si se trata de una frecuencia de medicion mensual o semestral-->
                        <p:treeTable rendered="#{item.value.class.simpleName eq 'TreeNodeMesSemestre'}" id="treeTable" value="#{item.value.root}" editable="true" editMode="cell" var="item_2">                                                                                                                
                            <!--Columna 1-->
                            <p:column headerText="" style="padding-left: 0px;">
                                <h:outputText value="#{item_2.nombrePeriodo}"/>
                                <h:inputHidden id="parentNodeString" value="#{item_2.nombrePadre}"/>
                            </p:column>
                            <!--Columna 2-->
                            <!--Columna que se renderiza si se escoge numero de actividades o peso como u de representacion-->
                            <p:column rendered="#{editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Número Actividades'
                                                    or
                                                  editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Peso ($)'}" headerText="Actividades" styleClass="align-center">
                                <p:cellEditor rendered="#{item_2.nombrePadre eq null}">
                                    <f:facet name="output"><h:outputText value="#{item_2.numActividades}"/></f:facet>
                                    <f:facet name="input">
                                        <p:spinner value="#{item_2.numActividades}" min="1" max="50"
                                                   valueChangeListener="#{editarIndicadorBean.onChangeSpinnerMesSemestre}">  
                                            <f:attribute name="anio" value="#{item.key}"/>
                                            <f:attribute name="nombrePeriodo" value="#{item_2.nombrePeriodo}"/>
                                            <p:ajax update="@form:panelAnios:treeTable"/>
                                        </p:spinner>
                                    </f:facet>
                                </p:cellEditor>
                                <p:cellEditor rendered="#{item_2.nombrePadre ne null}">
                                    <f:facet name="output"><h:outputText value="#{item_2.nombreActividad}"/></f:facet>
                                    <f:facet name="input">
                                        <p:inputText 
                                            rendered="#{editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Número Actividades'}"
                                            value="#{item_2.nombreActividad}">
                                            <p:ajax event="change" update="@form:panelAnios:treeTable" 
                                                    listener="#{editarIndicadorBean.calcularPorcentajeLogroMesSemestre(item.key, item_2.nombrePadre)}"/>                                            
                                        </p:inputText>´
                                        <p:inputText 
                                            rendered="#{editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Peso ($)'}"
                                            value="#{item_2.nombreActividad}">                                        
                                        </p:inputText>´                                        
                                    </f:facet>
                                </p:cellEditor>                                
                            </p:column>
                            <!--Columna que se renderiza si se escoge porcentaje-->                            
                            <p:column rendered="#{editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Porcentaje (%)'}" headerText="Actividades" styleClass="align-center">
                                <p:cellEditor rendered="#{item_2.nombrePadre eq null}">
                                        <f:facet name="output"><h:outputText value="#{item_2.porcActividad}%"/></f:facet>
                                        <f:facet name="input">
                                            <p:inputNumber id="porcActividades" 
                                                        value="#{item_2.porcActividad}"
                                                        minValue="0"
                                                        maxValue="100"
                                                        decimalPlaces="0"
                                                        symbol="%"
                                                        symbolPosition="s"
                                                        valueChangeListener="#{editarIndicadorBean.onChangeSpinnerMesSemestre}">
                                                <f:attribute name="anio" value="#{item.key}"/>
                                                <f:attribute name="nombrePeriodo" value="#{item_2.nombrePeriodo}"/>
                                                <p:ajax update="@form:panelAnios:treeTable"/>
                                            </p:inputNumber>   
                                        </f:facet>
                                </p:cellEditor>
                                <p:cellEditor rendered="#{item_2.nombrePadre ne null}">
                                        <f:facet name="output"><h:outputText value="#{item_2.nombreActividad}"/></f:facet>
                                        <f:facet name="input">
                                            <p:inputText 
                                                    value="#{item_2.nombreActividad}">
                                                <p:ajax event="change" update="@form:panelAnios:treeTable" 
                                                        listener="#{editarIndicadorBean.calcularPorcentajeLogroMesSemestre(item.key, item_2.nombrePadre)}"/>                                                  
                                            </p:inputText>´
                                        </f:facet>
                                </p:cellEditor>                                
                            </p:column>                           
                            <!--Columna 3-->
                            <!--Columna que se renderiza en caso de haber escogido numero de actividades como u de representacion-->
                            <p:column rendered="#{editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Número Actividades'
                                                    or
                                                  editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Porcentaje (%)'}" headerText="% Logro" width="40" styleClass="align-center">
                                <h:outputText rendered="#{item_2.nombrePadre eq null}" value="#{item_2.logro}%"/>
                                <h:outputText rendered="#{item_2.nombrePadre ne null}" value=""/>
                            </p:column>       
                            <!--Columna que se renderiza en caso de haber escogido peso como u de representacion-->
                            <p:column rendered="#{editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Peso ($)'}" headerText="Logro" styleClass="align-center">                        
                                <h:outputText rendered="#{item_2.nombrePadre eq null}" value="$#{item_2.monto}"/>
                                <p:cellEditor rendered="#{item_2.nombrePadre ne null}">
                                    <f:facet name="output"><h:outputText value="$#{item_2.monto}"/></f:facet>
                                    <f:facet name="input">
                                        <p:inputNumber id="input2" value="#{item_2.monto}" symbol="$"
                                                                        minValue="0"
                                                                        decimalPlaces="0"                                                                          
                                                                        thousandSeparator=".">
                                            <p:ajax event="change" update="@form:panelAnios:treeTable"
                                                    listener="#{editarIndicadorBean.calcularMontoMesSemestre(item.key, item_2.nombrePadre)}"/>            
                                        </p:inputNumber>
                                    </f:facet> 
                                </p:cellEditor>                                                                                                      
                            </p:column>                             
                        </p:treeTable>       
                        <!--Este datatable se desplegara solo si se trata de una frecuencia de medicion anual o bianual-->
                        <p:dataTable rendered="#{item.value.class.simpleName eq 'ActividadAnio'}" 
                                     var="item_3" 
                                     value="#{item.value.actividades}" 
                                     id="dataAnios" editable="true" editMode="cell">
                            
                            <f:facet name="header">                  
                                <p:panelGrid rendered="#{editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Número Actividades'}" 
                                             layout="grid" columns="2" 
                                             styleClass="ui-noborder panelgrid-lefttext ui-panelgrid-blank ui-fluid">                                                                                                                   
                                    <h:outputText class="texto-ver-centrado" value="Logro: #{item.value.logro}%"/>
                                    <p:spinner value="#{item.value.numActividades}" min="1" max="50"
                                               valueChangeListener="#{editarIndicadorBean.onChangeSpinnerAnio}">  
                                            <f:attribute name="anio" value="#{item.key}"/>                                       
                                            <p:ajax update="@form:panelAnios:dataAnios"/>                                                                                               
                                    </p:spinner>                              
                                </p:panelGrid>       
                                <p:panelGrid rendered="#{editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Peso ($)'}" 
                                             layout="grid" columns="2" 
                                             styleClass="ui-noborder panelgrid-lefttext ui-panelgrid-blank ui-fluid">                                                                                                                   
                                    <h:outputText class="texto-ver-centrado" value="$#{item.value.montoProceso}"/>
                                    <p:spinner value="#{item.value.numActividades}" min="1" max="50"
                                               valueChangeListener="#{editarIndicadorBean.onChangeSpinnerAnio}">  
                                            <f:attribute name="anio" value="#{item.key}"/>                                       
                                            <p:ajax update="@form:panelAnios:dataAnios"/>                                                                                             
                                    </p:spinner>                              
                                </p:panelGrid>   
                                <p:panelGrid rendered="#{editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Porcentaje (%)'}" 
                                             layout="grid" columns="2" 
                                             styleClass="ui-noborder panelgrid-lefttext ui-panelgrid-blank ui-fluid">    
                                    <h:outputText class="texto-ver-centrado" value="Logro: #{item.value.logro}%"/>
                                    <p:inputNumber id="porcActividades" 
                                                value="#{item.value.porcActividades}"
                                                minValue="0"
                                                maxValue="100"
                                                decimalPlaces="0"
                                                symbol="%"
                                                valueChangeListener="#{editarIndicadorBean.onChangeInputPorcAnio}"
                                                symbolPosition="s">
                                            <f:attribute name="anio" value="#{item.key}"/>                                       
                                            <p:ajax update="@form:panelAnios:dataAnios"/> 
                                    </p:inputNumber>                               
                                </p:panelGrid>                                   
                            </f:facet>                             
                            
                            <p:column rendered="#{editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Número Actividades'
                                                    or
                                                  editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Porcentaje (%)'}">
                                <h:outputText value="#{item.value.actividades.indexOf(item_3) + 1}"/>
                            </p:column> 
                            <p:column headerText="Montos" rendered="#{editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Peso ($)'}">
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="$#{item_3.montoActividad}"/>
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:inputNumber id="input2" value="#{item_3.montoActividad}" symbol="$"
                                                                        minValue="0"
                                                                        decimalPlaces="0"                                                                          
                                                                        thousandSeparator=".">
                                            <p:ajax event="change" update="@form:panelAnios:dataAnios"
                                                    listener="#{editarIndicadorBean.calcularMontoAnio(item.key)}"/>           
                                        </p:inputNumber>                                    
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>                                 
                            <p:column headerText="Actividades">
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="#{item_3.nombre}"/>
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:inputText rendered="#{editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Número Actividades'
                                                                    or
                                                                 editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Porcentaje (%)'}" 
                                                     value="#{item_3.nombre}">
                                            <p:ajax event="change" update="@form:panelAnios:dataAnios"
                                                    listener="#{editarIndicadorBean.calcularPorcentajeLogroAnio(item.key)}"/>   
                                        </p:inputText>
                                        <p:inputText rendered="#{editarIndicadorBean.unidadRepresentacion.unidadRepresentacion eq 'Peso ($)'}" 
                                                     value="#{item_3.nombre}">                                              
                                        </p:inputText>                                        
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>
                        </p:dataTable>                        
                    </p:tab>  
                </p:accordionPanel>
                <f:facet name="footer">
                    <p:commandButton style="visibility: hidden;" process="@this"/>   
                    <p:commandButton id="guardarLogros"                                                     
                        widgetVar="guardarLogrosButton"
                        class="ui-button-formulario"                                                   
                        value="Guardar logros y calcular logro indicador"
                        action="#{editarIndicadorBean.guardarLogros()}"
                        update="@form:growl, @form:logro"
                        process="@this, @form"/>  
                </f:facet>
            </p:dialog>             
        </div>         
    </ui:define>
</ui:composition>
