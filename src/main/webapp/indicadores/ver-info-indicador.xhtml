<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/WEB-INF/template.xhtml">
    <ui:define name="content">      
        <f:metadata>
            <f:importConstants type="com.ua.sistemaindicadores.frontend.beans.VerIndicadorBean"/>
            <f:event type="preRenderView" listener="#{verIndicadorBean.desplegarIndicador}"/>            
        </f:metadata>               
        <div class="ui-g-12 ui-g-title align-center">
            <h2 class="border-bottom-orange align-center">#{verIndicadorBean.mensajeVerInfoIndicador}</h2>   
        </div>              
        <div class="ui-g-12">
            <div class="ui-g-12 ui-md-2"></div>
            <div class="ui-g-12 ui-md-8">                   
                <div class="ui-g-12 ui-md-8">
                <p:panelGrid class="crear-tipo-indicadores-table" 
                             styleClass="ui-noborder ui-panelgrid-blank align-left"
                             columns="2">
                    <h3>NOMBRE INDICADOR: </h3>
                    <p:outputLabel id="nombre" value="#{verIndicadorBean.indicadorSeleccionado.nombreIndicador}"/>    
                    <h3>N° INDICADOR: </h3>
                    <p:outputLabel id="nInd" value="#{verIndicadorBean.indicadorSeleccionado.numIndicador}"/>                        
                </p:panelGrid>                    
                    
                </div>
                <div class="ui-g-12 ui-md-4">
                <p:panelGrid class="crear-tipo-indicadores-table" 
                             styleClass="ui-noborder ui-panelgrid-blank align-left"
                             columns="2">                        
                    <h3>% LOGRO: </h3>
                    <p:outputLabel id="porc" value="#{verIndicadorBean.indicadorSeleccionado.porcLogro}%"/>   
                    <h3>ESTADO: </h3>
                    <p:outputLabel id="estado" style="#{verIndicadorBean.indicadorSeleccionado.estado == 1 ?'color: green;':'color: orangered;' }" value="#{verIndicadorBean.indicadorSeleccionado.estado == 1 ? 'VIGENTE':'NO VIGENTE' }"/>                       
                </p:panelGrid>                    
                </div>

            </div>
            <div class="ui-g-12 ui-md-2"></div>
        </div>          
        <div class="ui-g-12 align-center">
            <div class="ui-g-12 ui-md-2"></div>
            <div class="ui-g-12 ui-md-8 ui-g-nopad">
                <div class="card card-creacion-tipo-indicador">                                              
                    <p:panel class="formulario" header="INFORMACIÓN INDICADOR">
                        <p:panelGrid class="crear-tipo-indicadores-table" 
                                     layout="grid"
                                     styleClass="ui-noborder panelgrid-lefttext ui-panelgrid-blank ui-fluid"
                                     columns="2">
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="TIPO INDICADOR:"/>    
                            <p:outputLabel id="tipoInd" value="#{verIndicadorBean.indicadorSeleccionado.clasificacionId.tipo}"/>
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="CLASIFICACIÓN:"/>    
                            <p:outputLabel id="clas" value="#{verIndicadorBean.indicadorSeleccionado.clasificacionId.nombre}"/>    
                            <!-- -->                            
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="DESCRIPCIÓN INDICADOR:"/>  
                            <p:inputTextarea class="textbox-disabled" disabled="true" value="#{verIndicadorBean.indicadorSeleccionado.descripcionIndicador}" id="descripcion" rows="8" cols="18"/>   
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="APLICA LINEAMIENTO:"/>    
                            <p:outputLabel id="lin" value="#{verIndicadorBean.indicadorSeleccionado.aplicaLineamiento}"/>    
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="APLICA OBJETIVO:"/>    
                            <p:outputLabel id="obj" value="#{verIndicadorBean.indicadorSeleccionado.aplicaObjetivo}"/>                                
                            <!-- -->                            
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="DESCRIPCIÓN OBJETIVO:"/>  
                            <p:inputTextarea class="textbox-disabled" disabled="true" value="#{verIndicadorBean.indicadorSeleccionado.descripcionObjetivo}" id="descripcionObj" rows="8" cols="18"/>   
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="AJUSTE PEDI:"/>    
                            <p:outputLabel id="ajustepdei" value="#{verIndicadorBean.indicadorSeleccionado.ajustePdeiId.ajustePdei}"/>     
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="UNIDAD REPRESENTACIÓN:"/>    
                            <p:outputLabel id="unidadR" value="#{verIndicadorBean.indicadorSeleccionado.unidadRepresentacionId.unidadRepresentacion}"/>  
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="GENERACIÓN DE LOS DATOS:"/>    
                            <p:outputLabel id="genDatos" value="#{verIndicadorBean.indicadorSeleccionado eq null ? 'Sin datos' : verIndicadorBean.getGeneracionesDatos(verIndicadorBean.indicadorSeleccionado.id)}"/>       
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="PLAZO:"/>    
                            <p:outputLabel id="plazo" value="#{verIndicadorBean.indicadorSeleccionado.plazoId.plazo}"/>      
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="VERSIÓN:"/>    
                            <p:outputLabel id="version" value="#{verIndicadorBean.indicadorSeleccionado.version}"/>    
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="LÍNEA BASE:"/>    
                            <p:outputLabel id="linbase" value="#{verIndicadorBean.indicadorSeleccionado.lineaBase}"/>    
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="METAS:"/>    
                            <p:outputLabel id="metas" value="#{verIndicadorBean.indicadorSeleccionado.metas}"/>        
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="AÑO CUMPLIMIENTO:"/>    
                            <p:outputLabel id="anioCum" value="#{verIndicadorBean.indicadorSeleccionado.anioCumplimientoId.anioCumplimiento}"/>  
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="FRECUENCIA DE MEDICIÓN:"/>    
                            <p:outputLabel id="fmedicion" value="#{verIndicadorBean.indicadorSeleccionado.frecuenciaMedicionId.frecuenciaMedicion}"/>   
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="MEDIO DE VERIFICACIÓN:"/>    
                            <p:outputLabel id="medVer" value="#{verIndicadorBean.indicadorSeleccionado.medioVerificacion}"/>     
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="FORMA DE CÁLCULO:"/>    
                            <p:outputLabel id="fcalculo" value="#{verIndicadorBean.indicadorSeleccionado.formaCalculo}"/>  
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="FUENTE DE INFORMACIÓN:"/>    
                            <p:outputLabel id="finfo" value="#{verIndicadorBean.indicadorSeleccionado.fuenteInformacion}"/>     
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="UNIDAD PROVEEDORA:"/>    
                            <p:outputLabel id="uprov" value="#{verIndicadorBean.indicadorSeleccionado eq null ?  'Sin datos' : verIndicadorBean.getUnidadesProveedoras(verIndicadorBean.indicadorSeleccionado.id)}"/>       
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="PROYECTO ASOCIADO:"/>    
                            <p:outputLabel id="proyAs" value="#{verIndicadorBean.indicadorSeleccionado.proyectoAsociado}"/>    
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="COMENTARIO:"/>    
                            <p:outputLabel id="comentario" value="#{verIndicadorBean.indicadorSeleccionado.comentario}"/> 
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="ACTIVIDAD COMPROMETIDA:"/>    
                            <p:outputLabel id="actividad" value="#{verIndicadorBean.indicadorSeleccionado.actividadComprometida}"/> 
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="ESTADO ACTIVIDAD:"/>    
                            <p:outputLabel id="estadoAct" value="#{verIndicadorBean.indicadorSeleccionado.estadoActividad}"/> 
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="FECHA CREACIÓN:"/>    
                            <p:outputLabel id="fechaCreacion" value="#{verIndicadorBean.indicadorSeleccionado.fechaCreacion}">
                            <f:convertDateTime pattern="dd/MM/yyyy 'a las' HH:mm:ss" timeZone="GMT-4"/>
                            </p:outputLabel>
                            <!-- -->
                            <p:outputLabel class="label-verinfo-indicador" style="font-size: 15px !important;" value="FECHA ACTUALIZACIÓN:"/>    
                            <p:outputLabel id="fechaAct" value="#{verIndicadorBean.indicadorSeleccionado.fechaActualizacion}">
                            <f:convertDateTime pattern="dd/MM/yyyy 'a las' HH:mm:ss" timeZone="GMT-4"/>
                            </p:outputLabel>
                        </p:panelGrid>                                         
                    </p:panel>
                </div>       
            </div>
            <div class="ui-g-12 ui-md-2"></div>
        </div>         
        <div rendered="#{verIndicadorBean.indicadorSeleccionado ne null}" class="ui-g-12 align-center">
            <div class="ui-g-12 ui-md-2"></div>
            <div class="ui-g-12 ui-md-8 ui-g-nopad">
                <h2>Inicio de evaluación: #{verIndicadorBean.inicioEvaluacion}</h2>
                <h2>Término de evaluación: #{verIndicadorBean.terminoEvaluacion}</h2>
                <p:accordionPanel id="panelAnios" widgetVar="panelAnios" value="#{verIndicadorBean.indicadorSeleccionado.frecuenciaMedicionId.frecuenciaMedicion eq 'Mensual' 
                                                                                  or
                                                                                  verIndicadorBean.indicadorSeleccionado.frecuenciaMedicionId.frecuenciaMedicion eq 'Semestral'?
                                                                                  verIndicadorBean.listaActividadesMesSemestre.entrySet().toArray()
                                                                                  :  
                                                                                  verIndicadorBean.listaActividades.entrySet().toArray()}" var="item">
                    <p:tab title="#{item.key}">        
                        <!--Este treetable se desplegara solo si se trata de una frecuencia de medicion mensual o semestral-->
                        <p:treeTable rendered="#{item.value.class.simpleName eq 'TreeNodeMesSemestre'}" id="treeTable" value="#{item.value.root}" var="item_2">                                                                                                                
                            <!--Columna 1-->
                            <p:column headerText="" style="padding-left: 0px;">
                                <h:outputText value="#{item_2.nombrePeriodo}"/>
                                <h:inputHidden id="parentNodeString" value="#{item_2.nombrePadre}"/>
                            </p:column>
                            <!--Columna 2-->
                            <!--Columna que se renderiza si se escoge numero de actividades o peso como u de representacion-->
                            <p:column rendered="#{verIndicadorBean.indicadorSeleccionado.unidadRepresentacionId.unidadRepresentacion eq 'Número Actividades'
                                                    or
                                                  verIndicadorBean.indicadorSeleccionado.unidadRepresentacionId.unidadRepresentacion eq 'Peso ($)'}" headerText="Actividades" styleClass="align-center">
                                <h:outputText rendered="#{item_2.nombrePadre eq null}" value="#{item_2.numActividades}"/>
                                <h:outputText rendered="#{item_2.nombrePadre ne null}" value="#{item_2.nombreActividad}"/>                           
                            </p:column>
                            <!--Columna que se renderiza si se escoge porcentaje-->                            
                            <p:column rendered="#{verIndicadorBean.indicadorSeleccionado.unidadRepresentacionId.unidadRepresentacion eq 'Porcentaje (%)'}" headerText="Actividades" styleClass="align-center">
                                <h:outputText rendered="#{item_2.nombrePadre eq null}" value="#{item_2.porcActividad}%"/>
                                <h:outputText rendered="#{item_2.nombrePadre ne null}" value="#{item_2.nombreActividad}"/>                               
                            </p:column>                           
                            <!--Columna 3-->
                            <!--Columna que se renderiza en caso de haber escogido numero de actividades como u de representacion-->
                            <p:column rendered="#{verIndicadorBean.indicadorSeleccionado.unidadRepresentacionId.unidadRepresentacion eq 'Número Actividades'
                                                    or
                                                  verIndicadorBean.indicadorSeleccionado.unidadRepresentacionId.unidadRepresentacion eq 'Porcentaje (%)'}" headerText="% Logro" width="40" styleClass="align-center">
                                <h:outputText rendered="#{item_2.nombrePadre eq null}" value="#{item_2.logro}%"/>
                                <h:outputText rendered="#{item_2.nombrePadre ne null}" value=""/>
                            </p:column>       
                            <!--Columna que se renderiza en caso de haber escogido peso como u de representacion-->
                            <p:column rendered="#{verIndicadorBean.indicadorSeleccionado.unidadRepresentacionId.unidadRepresentacion eq 'Peso ($)'}" headerText="Logro" styleClass="align-center">                        
                                <h:outputText value="$#{item_2.monto}"/>                                                                                                                                    
                            </p:column>                             
                        </p:treeTable>       
                        <!--Este datatable se desplegara solo si se trata de una frecuencia de medicion anual o bianual-->
                        <p:dataTable rendered="#{item.value.class.simpleName eq 'ActividadAnio'}" 
                                     var="item_3" 
                                     value="#{item.value.actividades}" 
                                     id="dataAnios">
                            
                            <f:facet name="header">                  
                                <p:panelGrid rendered="#{verIndicadorBean.indicadorSeleccionado.unidadRepresentacionId.unidadRepresentacion eq 'Número Actividades'}" 
                                             layout="grid" columns="2" 
                                             styleClass="ui-noborder panelgrid-lefttext ui-panelgrid-blank ui-fluid">                                                                                                                   
                                    <h:outputText class="texto-ver-centrado" value="Logro: #{item.value.logro}%"/>
                                    <h:outputText class="texto-ver-centrado" value="Número de actividades: #{item.value.numActividades}"/>                              
                                </p:panelGrid>       
                                <p:panelGrid rendered="#{verIndicadorBean.indicadorSeleccionado.unidadRepresentacionId.unidadRepresentacion eq 'Peso ($)'}" 
                                             layout="grid" columns="2" 
                                             styleClass="ui-noborder panelgrid-lefttext ui-panelgrid-blank ui-fluid">                                                                                                                   
                                    <h:outputText class="texto-ver-centrado" value="Monto: $#{item.value.montoProceso}"/>
                                    <h:outputText class="texto-ver-centrado" value="Número de actividades: #{item.value.numActividades}"/>                              
                                </p:panelGrid>   
                                <p:panelGrid rendered="#{verIndicadorBean.indicadorSeleccionado.unidadRepresentacionId.unidadRepresentacion eq 'Porcentaje (%)'}" 
                                             layout="grid" columns="2" 
                                             styleClass="ui-noborder panelgrid-lefttext ui-panelgrid-blank ui-fluid">    
                                    <h:outputText class="texto-ver-centrado" value="Logro: #{item.value.logro}%"/>
                                    <h:outputText class="texto-ver-centrado" value="Porcentaje de actividades: #{item.value.porcActividades}%"/>                               
                                </p:panelGrid>                                   
                            </f:facet>                             
                            
                            <p:column rendered="#{verIndicadorBean.indicadorSeleccionado.unidadRepresentacionId.unidadRepresentacion eq 'Número Actividades'
                                                    or
                                                  verIndicadorBean.indicadorSeleccionado.unidadRepresentacionId.unidadRepresentacion eq 'Porcentaje (%)'}">
                                <h:outputText value="#{item.value.actividades.indexOf(item_3) + 1}"/>
                            </p:column> 
                            <p:column headerText="Montos" rendered="#{verIndicadorBean.indicadorSeleccionado.unidadRepresentacionId.unidadRepresentacion eq 'Peso ($)'}">
                                <h:outputText value="$#{item_3.montoActividad}"/>
                            </p:column>                                 
                            <p:column headerText="Actividades">
                                <h:outputText value="#{item_3.nombre}"/>
                            </p:column>
                        </p:dataTable>                        
                    </p:tab>  
                </p:accordionPanel>    
            </div>
            <div class="ui-g-12 ui-md-2"></div>
        </div>          
    </ui:define>
</ui:composition>
